{"remainingRequest":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/babel-loader/lib/index.js!/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xingyanan/Desktop/1218toutiao/19toutiao/src/views/material/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/src/views/material/index.vue","mtime":1577540847883},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWN0aXZlTmFtZTogImFsbCIsCiAgICAgIGxpc3Q6IFtdLAogICAgICBwYWdlOiB7CiAgICAgICAgdG90YWxQaWM6IDAsCiAgICAgICAgY3VyUGFnZTogMSwKICAgICAgICBwYWdlU2l6ZTogMTAKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFBpY3R1cmU6IGZ1bmN0aW9uIGdldFBpY3R1cmUoKSB7CiAgICAgIHZhciByZXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0UGljdHVyZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLiRheGlvcyh7CiAgICAgICAgICAgICAgICB1cmw6ICIvdXNlci9pbWFnZXMiLAogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgIHBhZ2U6IHRoaXMucGFnZS5jdXJQYWdlLAogICAgICAgICAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wYWdlLnBhZ2VTaXplLAogICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0OmZhbHNlCiAgICAgICAgICAgICAgICAgIGNvbGxlY3Q6IHRoaXMuYWN0aXZlTmFtZSA9PT0gJ2NvbGxlY3QnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgdGhpcy5saXN0ID0gcmVzLmRhdGEucmVzdWx0czsKICAgICAgICAgICAgICB0aGlzLnBhZ2UudG90YWxQaWMgPSByZXMuZGF0YS50b3RhbF9jb3VudDsKICAgICAgICAgICAgICB0aGlzLnBhZ2UuY3VyUGFnZSA9IHJlcy5kYXRhLnBhZ2U7CiAgICAgICAgICAgICAgdGhpcy5wYWdlLnBhZ2VTaXplID0gcmVzLmRhdGEucGVyX3BhZ2U7CiAgICAgICAgICAgICAgdGhpcy5pc19jb2xsZWN0ZWQgPSByZXMuZGF0YS5yZXN1bHRzLmlzX2NvbGxlY3RlZDsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9LAogICAgdXBsb2RlUGljOiBmdW5jdGlvbiB1cGxvZGVQaWMocGFyYW1zKSB7CiAgICAgIHZhciBmb3JtOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHVwbG9kZVBpYyQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgZm9ybSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgIGZvcm0uYXBwZW5kKCdpbWFnZScsIHBhcmFtcy5maWxlKTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLiRheGlvcyh7CiAgICAgICAgICAgICAgICB1cmw6ICcvdXNlci9pbWFnZXMnLAogICAgICAgICAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgICAgICAgICBkYXRhOiBmb3JtCiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHRoaXMuZ2V0UGljdHVyZSgpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9LAogICAgY2hhbmdlQ3VyOiBmdW5jdGlvbiBjaGFuZ2VDdXIobmV3UGFnZSkgewogICAgICB0aGlzLnBhZ2UuY3VyUGFnZSA9IG5ld1BhZ2U7CiAgICAgIHRoaXMuZ2V0UGljdHVyZSgpOwogICAgfSwKICAgIGNoYW5nZVRhYjogZnVuY3Rpb24gY2hhbmdlVGFiKCkgewogICAgICB0aGlzLnBhZ2UuY3VyUGFnZSA9IDE7CiAgICAgIHRoaXMuZ2V0UGljdHVyZSgpOwogICAgfSwKICAgIHN0YXI6IGZ1bmN0aW9uIHN0YXIocm93KSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gc3RhciQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy4kYXhpb3MoewogICAgICAgICAgICAgICAgdXJsOiAiL3VzZXIvaW1hZ2VzLyIuY29uY2F0KHJvdy5pZC50b1N0cmluZygpKSwKICAgICAgICAgICAgICAgIG1ldGhvZDogJ3B1dCcsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgIGNvbGxlY3Q6IHJvdy5pc19jb2xsZWN0ZWQgPyBmYWxzZSA6IHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgdGhpcy5nZXRQaWN0dXJlKCk7CiAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKDExMTEpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9LAogICAgZGVsOiBmdW5jdGlvbiBkZWwocm93KSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZGVsJChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLiRjb25maXJtKCfmgqjnoa7lrpropoHliKDpmaTlkJcnKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy4kYXhpb3MoewogICAgICAgICAgICAgICAgdXJsOiAiL3VzZXIvaW1hZ2VzLyIuY29uY2F0KHJvdy5pZC50b1N0cmluZygpKSwKICAgICAgICAgICAgICAgIG1ldGhvZDogJ2RlbGV0ZScKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgdGhpcy5nZXRQaWN0dXJlKCk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFBpY3R1cmUoKTsKICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-card style=\"height:100vh\">\n    <bread-crumb slot=\"header\">\n      <template slot=\"title\">素材管理</template>\n    </bread-crumb>\n    <el-divider></el-divider>\n    <el-row>图片管理</el-row>\n    <el-divider></el-divider>\n\n    <!-- <el-radio-group v-model=\"tabPosition\" style=\"margin-bottom: 30px;\">\n      <el-radio-button label=\"top\">top</el-radio-button>\n      <el-radio-button label=\"right\">right</el-radio-button>\n    </el-radio-group> -->\n\n     <!-- <button style=\"float:right\">1111</button> -->\n     <el-upload :http-request=\"uplodePic\"\n    :show-file-list=\"false\" action\n    >\n         <el-button type=\"primary\" class=\"uplode\">上传图片</el-button>\n     </el-upload>\n    \n  <el-tabs style=\"height: 200px;\" @tab-click=\"changeTab\" v-model=\"activeName\">\n      \n    <el-tab-pane label=\"全部\" name=\"all\">\n        <div style=\"display:flex;flex-wrap:wrap;justify-content:flex-star\">\n           \n                <el-card v-for=\"itm in list\" :key=\"itm.id\" style=\"padding:0;width:150px;height:150px;margin:10px 20px;position: relative\">\n                    <img :src=\"itm.url\" alt=\"\" style=\"width:100%;\">\n                    <div style=\"width:100%;position: absolute;bottom:0;left:0;padding:10px 30px;background-color:#eee\" class=\"ico\">\n                        \n                        <i class=\"el-icon-star-off star\" @click=\"star(itm)\" :style=\"{color:itm.is_collected?'red':''}\"></i>\n                        <i class=\"el-icon-delete del\" @click=\"del(itm)\"></i> \n                    </div>\n                    \n                </el-card>\n           \n        </div>\n        <el-pagination\n            background layout=\"prev, pager, next\"\n            :total=\"page.totalPic\"\n            style=\"margin:50px\"\n            :page-size=\"page.pageSize\"\n            :current-page=\"page.curPage\"\n            @current-change=\"changeCur\">\n        </el-pagination>\n    </el-tab-pane>\n    <el-tab-pane label=\"收藏\" name=\"collect\">\n        <div style=\"display:flex;flex-wrap:wrap;justify-content:flex-star\">\n           \n                <el-card v-for=\"itm in list\" :key=\"itm.id\" style=\"padding:0;width:150px;height:150px;margin:10px 20px;position: relative\">\n                    <img :src=\"itm.url\" alt=\"\" style=\"width:100%;\">\n                </el-card>\n           \n        </div>\n        <el-pagination\n            background layout=\"prev, pager, next\"\n            :total=\"page.totalPic\"\n            style=\"margin:50px\"\n            :page-size=\"page.pageSize\"\n            :current-page=\"page.curPage\"\n            @current-change=\"changeCur\">\n        </el-pagination>\n    </el-tab-pane>\n    \n    </el-tabs>\n   \n      \n        \n    \n\n  </el-card>\n  \n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n        activeName:\"all\",\n        list:[],\n        page:{\n          totalPic:0,\n          curPage:1,\n          pageSize:10\n        },\n        \n    };\n  },\n  methods:{\n     async getPicture(){\n          let res= await this.$axios({\n              url:\"/user/images\",\n              params: {\n          \n                page:this.page.curPage,\n                per_page:this.page.pageSize,\n                // collect:false\n                collect:this.activeName ==='collect'\n            }\n          })\n          window.console.log(res);\n              this.list=res.data.results;\n            \n            this.page.totalPic=res.data.total_count;\n            this.page.curPage=res.data.page;\n            this.page.pageSize=res.data.per_page;\n            this.is_collected=res.data.results.is_collected\n      },\n      async uplodePic(params){\n            let form = new FormData()\n            form.append('image', params.file)\n            await this.$axios({\n                url:'/user/images',\n                \n                method:\"post\",\n                data:form,\n          })\n          this.getPicture()\n      },\n      changeCur(newPage){\n          this.page.curPage=newPage;\n          this.getPicture()\n      },\n      changeTab(){\n          this.page.curPage=1; \n          this.getPicture()\n      },\n      async star(row){\n         await this.$axios({\n              url:`/user/images/${row.id.toString()}`,\n              method:'put',\n              data:{\n                  collect:row.is_collected? false : true\n              }\n          })\n            this.getPicture()\n              window.console.log(1111)\n      },\n      async del(row){\n          \n         await this.$confirm('您确定要删除吗')\n          await this.$axios({\n                url:`/user/images/${row.id.toString()}`,\n                method:'delete',\n                \n            })\n             this.getPicture()\n          \n      }\n  },\n  created(){\n      this.getPicture()\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n    \n\n    .uplode{\n        position: absolute;\n        top: 94px;\n        right: 40px\n    \n    }\n    .el-main{\n        position: relative;\n    }\n    .el-divider--horizontal{\n        margin: 10px 0 !important;\n    }\n    .ico{\n        .star{\n            float:left;\n            // color: pink\n        }\n        .del{\n            float:right\n        }\n    }\n</style>"],"sourceRoot":"src/views/material"}]}