{"remainingRequest":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/babel-loader/lib/index.js!/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xingyanan/Desktop/1218toutiao/19toutiao/src/views/comment/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/src/views/comment/index.vue","mtime":1577014537789},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICBwYWdlOiB7fQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldENvbW1lbnQ6IGZ1bmN0aW9uIGdldENvbW1lbnQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRheGlvcyh7CiAgICAgICAgdXJsOiAiL2FydGljbGVzIiwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIC8vICAgIHJlc3BvbnNlX3R5cGU9Y29tbWVudAogICAgICAgICAgcmVzcG9uc2VfdHlwZTogImNvbW1lbnQiCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5saXN0ID0gcmVzLmRhdGEucmVzdWx0czsKICAgICAgICB3aW5kb3cuY29uc29sZS5sb2cocmVzKTsgLy8gdGhpcy5wYWdlLnRvdGFsUGFnZT1yZXMuZGF0YS5yZXN1bHRzCiAgICAgIH0pOwogICAgfSwKICAgIHRhbnNTdGF0dXM6IGZ1bmN0aW9uIHRhbnNTdGF0dXMocm93LCBjb2x1bW4sIGNlbGxWYWx1ZSkgewogICAgICByZXR1cm4gY2VsbFZhbHVlID8gIuato+W4uCIgOiAi5YWz6ZetIjsKICAgIH0sCiAgICBvcGVuT3JjbG9zZTogZnVuY3Rpb24gb3Blbk9yY2xvc2Uocm93KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgLy8gICAgd2luZG93LmNvbnNvbGUubG9nKHJvdykKICAgICAgdmFyIG1lcyA9IHJvdy5jb21tZW50X3N0YXR1cyA/ICLlhbPpl60iIDogIuaJk+W8gCI7CiAgICAgIHRoaXMuJGNvbmZpcm0oIlx1NjBBOFx1NjYyRlx1NTQyNlx1Nzg2RVx1NUI5QVx1ODk4MSIuY29uY2F0KG1lcywgIlx1OEJDNFx1OEJCQVx1NTQxNyIpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuJGF4aW9zKHsKICAgICAgICAgIHVybDogIi9jb21tZW50cy9zdGF0dXMiLAogICAgICAgICAgbWV0aG9kOiAicHV0IiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBhcnRpY2xlX2lkOiByb3cuaWQudG9TdHJpbmcoKQogICAgICAgICAgfSwKICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgYWxsb3dfY29tbWVudDogIXJvdy5jb21tZW50X3N0YXR1cwogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBtZXNzYWdlOiAi5pON5L2c5oiQ5YqfIgogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMyLmdldENvbW1lbnQoKTsKICAgICAgICB9KTsKICAgICAgfSk7IC8vICAgIGxldCByZT1jb25maXJtKCLnoa7lrpropoHkv67mlLnor4TorrrnirbmgIHlkJfvvJ8iKQogICAgICAvLyAgICAgaWYocmUpewogICAgICAvLyAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Q29tbWVudCgpOwogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA;AAFA,KAAA;AAMA,GARA;AASA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AACA,WAAA,MAAA,CAAA;AACA,QAAA,GAAA,EAAA,WADA;AAEA,QAAA,MAAA,EAAA;AACA;AACA,UAAA,aAAA,EAAA;AAFA;AAFA,OAAA,EAMA,IANA,CAMA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,GAAA,EAFA,CAIA;AACA,OAXA;AAYA,KAdA;AAgBA,IAAA,UAhBA,sBAgBA,GAhBA,EAgBA,MAhBA,EAgBA,SAhBA,EAgBA;AACA,aAAA,SAAA,GAAA,IAAA,GAAA,IAAA;AACA,KAlBA;AAmBA,IAAA,WAnBA,uBAmBA,GAnBA,EAmBA;AAAA;;AACA;AACA,UAAA,GAAA,GAAA,GAAA,CAAA,cAAA,GAAA,IAAA,GAAA,IAAA;AACA,WAAA,QAAA,+CAAA,GAAA,yBAAA,IAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA;AACA,UAAA,GAAA,EAAA,kBADA;AAEA,UAAA,MAAA,EAAA,KAFA;AAGA,UAAA,MAAA,EAAA;AACA,YAAA,UAAA,EAAA,GAAA,CAAA,EAAA,CAAA,QAAA;AADA,WAHA;AAMA,UAAA,IAAA,EAAA;AACA,YAAA,aAAA,EAAA,CAAA,GAAA,CAAA;AADA;AANA,SAAA,EASA,IATA,CASA,YAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA;AACA,YAAA,IAAA,EAAA,SADA;AAEA,YAAA,OAAA,EAAA;AAFA,WAAA;;AAIA,UAAA,MAAA,CAAA,UAAA;AACA,SAfA;AAgBA,OAjBA,EAHA,CAqBA;AACA;AAEA;AACA;AA5CA,GATA;AAuDA,EAAA,OAvDA,qBAuDA;AACA,SAAA,UAAA;AACA;AAzDA,CAAA","sourcesContent":["<template>\n  <el-card>\n    <bread-crumb slot=\"header\">\n      <tempelate slot=\"title\">评论列表</tempelate>\n    </bread-crumb>\n\n    <el-table :data=\"list\">\n      <el-table-column prop=\"title\" label=\"标题\"></el-table-column>\n      <el-table-column prop=\"comment_status\" label=\"评论状态\" :formatter=\"tansStatus\"></el-table-column>\n      <el-table-column prop=\"total_comment_count\" label=\"评论总数\"></el-table-column>\n      <el-table-column prop=\"fans_comment_count\" label=\"粉丝评论数\"></el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"obj\">\n          <!-- 这个obj是什么？？？？？ -->\n          <el-button type=\"text\">修改</el-button>\n          <el-button\n            type=\"text\"\n            @click=\"openOrclose(obj.row)\"\n          >{{obj.row.comment_status? '关闭评论' : '打开评论'}}</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-row type=\"flex\" style=\"height:100px\" justify='center' align=\"middle\">\n        <el-pagination\n         background layout=\"prev, pager, next\"\n          :total=\"list.total_count\"\n           style=\"margin:50px\"\n           :page-size=\"list.per_page\"\n           :current-page=\"list.page\"\n          >\n          </el-pagination>\n\n    </el-row>\n  </el-card>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      list: [],\n        page:{\n\n        }\n    };\n  },\n  methods: {\n    getComment() {\n      this.$axios({\n        url: \"/articles\",\n        params: {\n          //    response_type=comment\n          response_type: \"comment\"\n        }\n      }).then(res => {\n        this.list = res.data.results;\n        window.console.log(res);\n        \n        // this.page.totalPage=res.data.results\n      });\n    },\n\n    tansStatus(row, column, cellValue) {\n      return cellValue ? \"正常\" : \"关闭\";\n    },\n    openOrclose(row) {\n      //    window.console.log(row)\n      let mes = row.comment_status ? \"关闭\" : \"打开\";\n      this.$confirm(`您是否确定要${mes}评论吗`).then(() => {\n        this.$axios({\n          url: \"/comments/status\",\n          method: \"put\",\n          params: {\n            article_id: row.id.toString()\n          },\n          data: {\n            allow_comment: !row.comment_status\n          }\n        }).then(() => {\n          this.$message({\n            type: \"success\",\n            message: \"操作成功\"\n          });\n          this.getComment();\n        });\n      });\n      //    let re=confirm(\"确定要修改评论状态吗？\")\n      //     if(re){\n\n      //     }\n    }\n  },\n  created() {\n    this.getComment();\n  }\n};\n</script>\n\n<style>\n\n\n</style>"],"sourceRoot":"src/views/comment"}]}