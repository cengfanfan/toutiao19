{"remainingRequest":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/babel-loader/lib/index.js!/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xingyanan/Desktop/1218toutiao/19toutiao/src/views/comment/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/src/views/comment/index.vue","mtime":1577591862181},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vIGltcG9ydCB7IGFzeW5jIH0gZnJvbSAncSc7Ci8vIGltcG9ydCB7Z2V0Q29tbWVudH0gZnJvbSAnLi4vLi4vYWN0aW9ucy9hcGknCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICAgIHBhZ2U6IHsKICAgICAgICB0b3RhbEFydDogMCwKICAgICAgICBjdXJQYWdlOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMAogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlQ3VyOiBmdW5jdGlvbiBjaGFuZ2VDdXIobmV3UGFnZSkgewogICAgICB0aGlzLnBhZ2UuY3VyUGFnZSA9IG5ld1BhZ2U7CiAgICAgIHRoaXMuZ2V0Q29tbWVudCgpOwogICAgfSwKICAgIGdldENvbW1lbnQ6IGZ1bmN0aW9uIGdldENvbW1lbnQoKSB7CiAgICAgIHZhciByZXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0Q29tbWVudCQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLiRheGlvcyh7CiAgICAgICAgICAgICAgICB1cmw6ICIvYXJ0aWNsZXMiLAogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgIC8vICAgIHJlc3BvbnNlX3R5cGU9Y29tbWVudAogICAgICAgICAgICAgICAgICByZXNwb25zZV90eXBlOiAiY29tbWVudCIsCiAgICAgICAgICAgICAgICAgIHBhZ2U6IHRoaXMucGFnZS5jdXJQYWdlLAogICAgICAgICAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wYWdlLnBhZ2VTaXplCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgdGhpcy5saXN0ID0gcmVzLmRhdGEucmVzdWx0czsgLy8gd2luZG93LmNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgICAgICAgIHRoaXMucGFnZS50b3RhbEFydCA9IHJlcy5kYXRhLnRvdGFsX2NvdW50OwogICAgICAgICAgICAgIHRoaXMucGFnZS5jdXJQYWdlID0gcmVzLmRhdGEucGFnZTsKICAgICAgICAgICAgICB0aGlzLnBhZ2UucGFnZVNpemUgPSByZXMuZGF0YS5wZXJfcGFnZTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9LAogICAgdGFuc1N0YXR1czogZnVuY3Rpb24gdGFuc1N0YXR1cyhyb3csIGNvbHVtbiwgY2VsbFZhbHVlKSB7CiAgICAgIHJldHVybiBjZWxsVmFsdWUgPyAi5q2j5bi4IiA6ICLlhbPpl60iOwogICAgfSwKICAgIG9wZW5PcmNsb3NlOiBmdW5jdGlvbiBvcGVuT3JjbG9zZShyb3cpIHsKICAgICAgdmFyIG1lczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBvcGVuT3JjbG9zZSQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgLy8gICAgd2luZG93LmNvbnNvbGUubG9nKHJvdykKICAgICAgICAgICAgICBtZXMgPSByb3cuY29tbWVudF9zdGF0dXMgPyAi5YWz6ZetIiA6ICLmiZPlvIAiOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuJGNvbmZpcm0oIlx1NjBBOFx1NjYyRlx1NTQyNlx1Nzg2RVx1NUI5QVx1ODk4MSIuY29uY2F0KG1lcywgIlx1OEJDNFx1OEJCQVx1NTQxNyIpKSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy4kYXhpb3MoewogICAgICAgICAgICAgICAgdXJsOiAiL2NvbW1lbnRzL3N0YXR1cyIsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICJwdXQiLAogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgIGFydGljbGVfaWQ6IHJvdy5pZC50b1N0cmluZygpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICBhbGxvd19jb21tZW50OiAhcm93LmNvbW1lbnRfc3RhdHVzCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgbWVzc2FnZTogIuaTjeS9nOaIkOWKnyIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLmdldENvbW1lbnQoKTsgLy8gICAgbGV0IHJlPWNvbmZpcm0oIuehruWumuimgeS/ruaUueivhOiuuueKtuaAgeWQl++8nyIpCiAgICAgICAgICAgICAgLy8gICAgIGlmKHJlKXsKICAgICAgICAgICAgICAvLyAgICAgfQoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRDb21tZW50KCk7CiAgfQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA;AACA,QAAA,QAAA,EAAA,CADA;AAEA,QAAA,OAAA,EAAA,CAFA;AAGA,QAAA,QAAA,EAAA;AAHA;AAFA,KAAA;AAQA,GAVA;AAWA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,qBACA,OADA,EACA;AACA,WAAA,IAAA,CAAA,OAAA,GAAA,OAAA;AACA,WAAA,UAAA;AACA,KAJA;AAKA,IAAA,UALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAMA,KAAA,MAAA,CAAA;AACA,gBAAA,GAAA,EAAA,WADA;AAEA,gBAAA,MAAA,EAAA;AACA;AACA,kBAAA,aAAA,EAAA,SAFA;AAEA,kBAAA,IAAA,EAAA,KAAA,IAAA,CAAA,OAFA;AAEA,kBAAA,QAAA,EAAA,KAAA,IAAA,CAAA;AAFA;AAFA,eAAA,CANA;;AAAA;AAMA,cAAA,GANA;AAaA,mBAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CAbA,CAcA;;AAEA,mBAAA,IAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,WAAA;AACA,mBAAA,IAAA,CAAA,OAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,mBAAA,IAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,QAAA;;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBA,IAAA,UArBA,sBAqBA,GArBA,EAqBA,MArBA,EAqBA,SArBA,EAqBA;AACA,aAAA,SAAA,GAAA,IAAA,GAAA,IAAA;AACA,KAvBA;AAwBA,IAAA,WAxBA,uBAwBA,GAxBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBA;AACA,cAAA,GA1BA,GA0BA,GAAA,CAAA,cAAA,GAAA,IAAA,GAAA,IA1BA;AAAA;AAAA,8CA2BA,KAAA,QAAA,+CAAA,GAAA,wBA3BA;;AAAA;AAAA;AAAA,8CA4BA,KAAA,MAAA,CAAA;AACA,gBAAA,GAAA,EAAA,kBADA;AAEA,gBAAA,MAAA,EAAA,KAFA;AAGA,gBAAA,MAAA,EAAA;AACA,kBAAA,UAAA,EAAA,GAAA,CAAA,EAAA,CAAA,QAAA;AADA,iBAHA;AAMA,gBAAA,IAAA,EAAA;AACA,kBAAA,aAAA,EAAA,CAAA,GAAA,CAAA;AADA;AANA,eAAA,CA5BA;;AAAA;AAsCA,mBAAA,QAAA,CAAA;AACA,gBAAA,IAAA,EAAA,SADA;AAEA,gBAAA,OAAA,EAAA;AAFA,eAAA;AAIA,mBAAA,UAAA,GA1CA,CA2CA;AACA;AAEA;;AA9CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAXA;AA4DA,EAAA,OA5DA,qBA4DA;AACA,SAAA,UAAA;AACA;AA9DA,CAAA","sourcesContent":["<template>\n  <el-card>\n    <bread-crumb slot=\"header\">\n      <template slot=\"title\">评论列表</template>\n    </bread-crumb>\n\n    <el-table :data=\"list\">\n      <el-table-column prop=\"title\" label=\"标题\"></el-table-column>\n      <el-table-column prop=\"comment_status\" label=\"评论状态\" :formatter=\"tansStatus\"></el-table-column>\n      <el-table-column prop=\"total_comment_count\" label=\"评论总数\"></el-table-column>\n      <el-table-column prop=\"fans_comment_count\" label=\"粉丝评论数\"></el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"obj\">\n          <!-- 这个obj是什么？？？？？ -->\n          <el-button type=\"text\">修改</el-button>\n          <el-button\n            type=\"text\"\n            @click=\"openOrclose(obj.row)\"\n          >{{obj.row.comment_status? '关闭评论' : '打开评论'}}</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-row type=\"flex\" style=\"height:100px\" justify='center' align=\"middle\">\n        <el-pagination\n         background layout=\"prev, pager, next\"\n          :total=\"page.totalArt\"\n           style=\"margin:50px\"\n           :page-size=\"page.pageSize\"\n           :current-page=\"page.curPage\"\n           @current-change=\"changeCur\"\n          >\n          </el-pagination>\n\n    </el-row>\n  </el-card>\n</template>\n\n<script>\n// import { async } from 'q';\n// import {getComment} from '../../actions/api'\nexport default {\n  data() {\n    return {\n      list: [],\n        page:{\n            totalArt:0,\n            curPage:1,\n            pageSize:10,\n        }\n    };\n  },\n  methods: {\n      changeCur(newPage){\n          this.page.curPage=newPage;\n          this.getComment();\n      },\n    async getComment() {\n     let res= await this.$axios({\n        url: \"/articles\",\n        params: {\n          //    response_type=comment\n          response_type: \"comment\",page:this.page.curPage,per_page:this.page.pageSize\n        }\n      })\n      this.list = res.data.results;\n        // window.console.log(res);\n        \n        this.page.totalArt=res.data.total_count;\n        this.page.curPage=res.data.page;\n        this.page.pageSize=res.data.per_page;\n    },\n\n    tansStatus(row, column, cellValue) {\n      return cellValue ? \"正常\" : \"关闭\";\n    },\n   async openOrclose(row) {\n      //    window.console.log(row)\n      let mes = row.comment_status ? \"关闭\" : \"打开\";\n      await this.$confirm(`您是否确定要${mes}评论吗`)\n      await this.$axios({\n          url: \"/comments/status\",\n          method: \"put\",\n          params: {\n            article_id: row.id.toString()\n          },\n          data: {\n            allow_comment: !row.comment_status\n          }\n        })\n          this.$message({\n            type: \"success\",\n            message: \"操作成功\"\n          });\n          this.getComment();\n      //    let re=confirm(\"确定要修改评论状态吗？\")\n      //     if(re){\n\n      //     }\n    }\n  },\n  created() {\n    this.getComment();\n  }\n};\n</script>\n\n<style>\n\n\n</style>"],"sourceRoot":"src/views/comment"}]}