{"remainingRequest":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/babel-loader/lib/index.js!/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xingyanan/Desktop/1218toutiao/19toutiao/src/views/atricles/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/src/views/atricles/index.vue","mtime":1577283899916},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJhZGlvOiA1LAogICAgICB0eXBlTGlzdDogW10sCiAgICAgIGF0cmljbGVzOiB7fSwKICAgICAgZGF0ZTogIiIsCiAgICAgIGltZzogcmVxdWlyZSgiLi4vLi4vYXNzZXRzL2ltZy80MDQucG5nIiksCiAgICAgIHRvdGFsOiAwLAogICAgICBwYWdlOiB7CiAgICAgICAgdG90YWw6IDAsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIGN1clBhZ2U6IDEKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNoYW5nZUN1cjogZnVuY3Rpb24gY2hhbmdlQ3VyKG5ld1BhZ2UpIHsKICAgICAgd2luZG93LmNvbnNvbGUubG9nKG5ld1BhZ2UpOwogICAgICB0aGlzLnBhZ2UuY3VyUGFnZSA9IG5ld1BhZ2U7CiAgICAgIHRoaXMuZ2V0YXRyaWNsZXMoewogICAgICAgIHBhZ2U6IG5ld1BhZ2UsCiAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGFnZVNpemUKICAgICAgfSk7CiAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyh0aGlzLnBhZ2UuY3VyUGFnZSk7CiAgICB9LAogICAgZ2V0VHlwZUxpc3Q6IGZ1bmN0aW9uIGdldFR5cGVMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kYXhpb3MoewogICAgICAgIHVybDogIi9jaGFubmVscyIKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMudHlwZUxpc3QgPSByZXMuZGF0YS5jaGFubmVsczsgLy8gICB0aGlzLnR5cGVMaXN0Lm5hbWU9cmVzLmNoYW5uZWxzLm5hbWUKCiAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHJlcy5kYXRhLmNoYW5uZWxzKTsgLy8gd2luZG93LmNvbnNvbGUubG9nKHRoaXMudHlwZUxpc3QuaWQpCiAgICAgIH0pOwogICAgfSwKICAgIGNoYW5nZVN0YXR1czogZnVuY3Rpb24gY2hhbmdlU3RhdHVzKCkgewogICAgICB2YXIgcGFyYW1zID0gewogICAgICAgIHN0YXR1czogdGhpcy5hdHJpY2xlcy5zdGF0dXMgPT09IDUgPyBudWxsIDogdGhpcy5hdHJpY2xlcy5zdGF0dXMsCiAgICAgICAgY2hhbm5lbF9pZDogdGhpcy50eXBlTGlzdC5pZCwKICAgICAgICBiZWdpbl9wdWJkYXRlOiB0aGlzLmRhdGUgPyB0aGlzLmRhdGVbMF0gOiBudWxsLAogICAgICAgIGVuZF9wdWJkYXRlOiB0aGlzLmRhdGUgPiAxID8gdGhpcy5kYXRlWzFdIDogbnVsbAogICAgICB9OwogICAgICB0aGlzLmdldGF0cmljbGVzKHBhcmFtcyk7IC8vIOiwg+eUqOiOt+WPluaWh+eroOaVsOaNrgogICAgfSwKICAgIGdldGF0cmljbGVzOiBmdW5jdGlvbiBnZXRhdHJpY2xlcyhwYXJhbXMpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRheGlvcyh7CiAgICAgICAgdXJsOiAiL2FydGljbGVzIiwKICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB3aW5kb3cuY29uc29sZS5sb2cocmVzLmRhdGEucmVzdWx0cyk7CiAgICAgICAgX3RoaXMyLmF0cmljbGVzID0gcmVzLmRhdGEucmVzdWx0czsKICAgICAgICBfdGhpczIudG90YWwgPSByZXMuZGF0YS50b3RhbF9jb3VudDsKICAgICAgICBfdGhpczIucGFnZS50b3RhbCA9IHJlcy5kYXRhLnRvdGFsX2NvdW50OwogICAgICAgIF90aGlzMi5wYWdlLnBhZ2VTaXplID0gcmVzLmRhdGEucGVyX3BhZ2U7IC8vIHRoaXMucGFnZS5jdXJQYWdlID0gcmVzLmRhdGEucGFnZTsKICAgICAgfSk7CiAgICB9LAogICAgZGVsQXJ0OiBmdW5jdGlvbiBkZWxBcnQoaWQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLiRjb25maXJtKCfmgqjnoa7lrpropoHliKDpmaTlkJfvvJ8nKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczMuJGF4aW9zKHsKICAgICAgICAgIHVybDogIi9hcnRpY2xlcy8iLmNvbmNhdChpZC50b1N0cmluZygpKSwKICAgICAgICAgIG1ldGhvZDogJ2RlbGV0ZScKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzMy5nZXRhdHJpY2xlcygpOwoKICAgICAgICAgIF90aGlzMy4kbWVzc2FnZShyZXMubWVzc2FnZSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgZmlsdGVyczogewogICAgdHJhbnNTdGF0dXM6IGZ1bmN0aW9uIHRyYW5zU3RhdHVzKHZhbHVlKSB7CiAgICAgIHN3aXRjaCAodmFsdWUpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICByZXR1cm4gIuiNieeovyI7CgogICAgICAgIGNhc2UgMToKICAgICAgICAgIHJldHVybiAi5b6F5a6h5qC4IjsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgcmV0dXJuICLlt7Llj5HooagiOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXR1cm4gIuWuoeaguOWksei0pSI7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0VHlwZUxpc3QoKTsKICAgIHRoaXMuZ2V0YXRyaWNsZXMoKTsKICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <el-card>\n      <bread-crumb slot=\"header\">\n        <template slot=\"title\">内容列表</template>\n      </bread-crumb>\n\n      <el-row>全部图文</el-row>\n      <el-divider></el-divider>\n      <el-row class=\"formList\">\n        <el-col :span=\"2\">\n          <span>文章状态</span>\n        </el-col>\n        <el-col :span=\"18\">\n          <!-- 文章状态，0-草稿，1-待审核，2-审核通过，3-审核失败，4-已删除，不传为全部 -->\n          <el-radio-group v-model=\"atricles.status\" @change=\"changeStatus\">\n            <el-radio :label=\"5\">全部</el-radio>\n            <el-radio :label=\"0\">草稿</el-radio>\n            <el-radio :label=\"1\">待审核</el-radio>\n            <el-radio :label=\"2\">审核通过</el-radio>\n            <el-radio :label=\"3\">审核失败</el-radio>\n          </el-radio-group>\n        </el-col>\n      </el-row>\n      <el-row class=\"formList\">\n        <el-col :span=\"2\">\n          <span>频道列表</span>\n        </el-col>\n        <el-col :span=\"18\">\n          <el-select v-model=\"typeList.id\" @change=\"changeStatus\">\n            <el-option v-for=\"itm in typeList\" :key=\"itm.id\" :label=\"itm.name\" :value=\"itm.id\"></el-option>\n          </el-select>\n        </el-col>\n      </el-row>\n      <el-row class=\"formList\">\n        <el-col :span=\"2\">\n          <span>选择时间</span>\n        </el-col>\n        <el-col :span=\"18\">\n          <div>\n            <el-date-picker\n            value-format=\"yyyy-MM-dd\"\n              @change=\"changeStatus\"\n              v-model=\"date\"\n              type=\"daterange\"\n              range-separator=\"-\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n            ></el-date-picker>\n            {{date}}\n          </div>\n        </el-col>\n      </el-row>\n    </el-card>\n    <el-card>\n      <p>共找到{{total}}条符合条件的内容</p>\n      <el-divider></el-divider>\n      <el-row v-for=\"(itm,index) in atricles\" :key=\"index\" class=\"main_body\">\n        <el-col class=\"user_img\">\n          <img :src=\"itm.cover.type? itm.cover.images : img\" alt />\n        </el-col>\n        <el-col class=\"user_cont\">\n          <span>{{itm.title}}</span>\n          <el-tag style=\"width:60px\">{{itm.status|transStatus}}</el-tag>\n          <span>{{itm.pubdate}}</span>\n        </el-col>\n        <el-col class=\"button\">\n          <el-button type=\"text\">\n            <i class=\"el-icon-edit\"></i>\n            <span>修改</span>\n          </el-button>\n          <el-button type=\"text\" @click=\"delArt(itm.id)\">\n            <i class=\"el-icon-delete\"></i>\n            <span>删除</span>\n          </el-button>\n        </el-col>\n        <el-col></el-col>\n      </el-row>\n\n      <el-row type=\"flex\" justify=\"center\" style=\"margin-top:20px\">\n        <el-pagination\n          background\n          layout=\"prev, pager, next\"\n          :total=\"page.total\"\n          :current-page=\"page.curPage\"\n          :page-size=\"page.pageSize\"\n          @current-change=\"changeCur\"\n        ></el-pagination>\n      </el-row>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      radio: 5,\n      typeList: [],\n      atricles: {},\n      date: \"\",\n      img: require(\"../../assets/img/404.png\"),\n      total: 0,\n      page: {\n        total: 0,\n        pageSize: 10,\n        curPage: 1\n      }\n    };\n  },\n  methods: {\n    changeCur(newPage) {\n      window.console.log(newPage);\n      this.page.curPage = newPage;\n      this.getatricles(\n          {\n              page:newPage,\n              per_page:this.pageSize,\n              \n          }\n      );\n      window.console.log(this.page.curPage);\n    },\n    getTypeList() {\n      this.$axios({\n        url: \"/channels\"\n      }).then(res => {\n        this.typeList = res.data.channels;\n        //   this.typeList.name=res.channels.name\n        window.console.log(res.data.channels);\n        // window.console.log(this.typeList.id)\n      });\n    },\n\n    changeStatus() {\n      let params = {\n        status: this.atricles.status === 5 ? null : this.atricles.status,\n        channel_id: this.typeList.id,\n        begin_pubdate: this.date? this.date[0]:null,\n        end_pubdate: this.date>1? this.date[1]:null\n      };\n\n      this.getatricles(params); // 调用获取文章数据\n    },\n    getatricles(params) {\n      this.$axios({\n        url: \"/articles\",\n        params\n      }).then(res => {\n        window.console.log(res.data.results);\n        this.atricles = res.data.results;\n        this.total = res.data.total_count;\n        this.page.total = res.data.total_count;\n        this.page.pageSize = res.data.per_page;\n        // this.page.curPage = res.data.page;\n      });\n    },\n    delArt(id){\n        \n        this.$confirm('您确定要删除吗？').then(()=>{\n            this.$axios({\n                url:`/articles/${id.toString()}`,\n                method:'delete',\n\n            }).then((res)=>{\n                this.getatricles();\n                this.$message(res.message)\n            })\n        })\n    }\n  },\n  filters: {\n    transStatus(value) {\n      switch (value) {\n        case 0:\n          return \"草稿\";\n        case 1:\n          return \"待审核\";\n        case 2:\n          return \"已发表\";\n        case 3:\n          return \"审核失败\";\n        default:\n          break;\n      }\n    }\n  },\n  created() {\n    this.getTypeList();\n    this.getatricles();\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.user_img {\n  float: left;\n  width: 180px;\n  img {\n    width: 170px;\n    height: 100px;\n  }\n}\n.user_cont {\n  width: 70%;\n  display: flex;\n  flex-direction: column;\n  float: left;\n}\n.button {\n  width: 100px;\n  float: right;\n}\n.main_body {\n  margin-top: 10px;\n  height: 120px;\n  border-bottom: 1px solid #eaeef1;\n}\n.formList {\n  margin: 20px 0;\n}\n</style>"],"sourceRoot":"src/views/atricles"}]}