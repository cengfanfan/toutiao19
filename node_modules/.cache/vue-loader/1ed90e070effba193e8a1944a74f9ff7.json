{"remainingRequest":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xingyanan/Desktop/1218toutiao/19toutiao/src/views/comment/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/src/views/comment/index.vue","mtime":1577015828190},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICAgICAgcGFnZTp7CiAgICAgICAgICAgIHRvdGFsQXJ0OjAsCiAgICAgICAgICAgIGN1clBhZ2U6MSwKICAgICAgICAgICAgcGFnZVNpemU6MTAsCiAgICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgICAgY2hhbmdlQ3VyKG5ld1BhZ2UpewogICAgICAgICAgdGhpcy5wYWdlLmN1clBhZ2U9bmV3UGFnZTsKICAgICAgICAgIHRoaXMuZ2V0Q29tbWVudCgpOwogICAgICB9LAogICAgZ2V0Q29tbWVudCgpIHsKICAgICAgdGhpcy4kYXhpb3MoewogICAgICAgIHVybDogIi9hcnRpY2xlcyIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAvLyAgICByZXNwb25zZV90eXBlPWNvbW1lbnQKICAgICAgICAgIHJlc3BvbnNlX3R5cGU6ICJjb21tZW50IixwYWdlOnRoaXMucGFnZS5jdXJQYWdlLHBlcl9wYWdlOnRoaXMucGFnZS5wYWdlU2l6ZQogICAgICAgIH0KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMubGlzdCA9IHJlcy5kYXRhLnJlc3VsdHM7CiAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgCiAgICAgICAgdGhpcy5wYWdlLnRvdGFsQXJ0PXJlcy5kYXRhLnRvdGFsX2NvdW50OwogICAgICAgIHRoaXMucGFnZS5jdXJQYWdlPXJlcy5kYXRhLnBhZ2U7CiAgICAgICAgdGhpcy5wYWdlLnBhZ2VTaXplPXJlcy5kYXRhLnBlcl9wYWdlOwoKCgogICAgICB9KTsKICAgIH0sCgogICAgdGFuc1N0YXR1cyhyb3csIGNvbHVtbiwgY2VsbFZhbHVlKSB7CiAgICAgIHJldHVybiBjZWxsVmFsdWUgPyAi5q2j5bi4IiA6ICLlhbPpl60iOwogICAgfSwKICAgIG9wZW5PcmNsb3NlKHJvdykgewogICAgICAvLyAgICB3aW5kb3cuY29uc29sZS5sb2cocm93KQogICAgICBsZXQgbWVzID0gcm93LmNvbW1lbnRfc3RhdHVzID8gIuWFs+mXrSIgOiAi5omT5byAIjsKICAgICAgdGhpcy4kY29uZmlybShg5oKo5piv5ZCm56Gu5a6a6KaBJHttZXN96K+E6K665ZCXYCkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kYXhpb3MoewogICAgICAgICAgdXJsOiAiL2NvbW1lbnRzL3N0YXR1cyIsCiAgICAgICAgICBtZXRob2Q6ICJwdXQiLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGFydGljbGVfaWQ6IHJvdy5pZC50b1N0cmluZygpCiAgICAgICAgICB9LAogICAgICAgICAgZGF0YTogewogICAgICAgICAgICBhbGxvd19jb21tZW50OiAhcm93LmNvbW1lbnRfc3RhdHVzCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBtZXNzYWdlOiAi5pON5L2c5oiQ5YqfIgogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmdldENvbW1lbnQoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIC8vICAgIGxldCByZT1jb25maXJtKCLnoa7lrpropoHkv67mlLnor4TorrrnirbmgIHlkJfvvJ8iKQogICAgICAvLyAgICAgaWYocmUpewoKICAgICAgLy8gICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldENvbW1lbnQoKTsKICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/comment","sourcesContent":["<template>\n  <el-card>\n    <bread-crumb slot=\"header\">\n      <tempelate slot=\"title\">评论列表</tempelate>\n    </bread-crumb>\n\n    <el-table :data=\"list\">\n      <el-table-column prop=\"title\" label=\"标题\"></el-table-column>\n      <el-table-column prop=\"comment_status\" label=\"评论状态\" :formatter=\"tansStatus\"></el-table-column>\n      <el-table-column prop=\"total_comment_count\" label=\"评论总数\"></el-table-column>\n      <el-table-column prop=\"fans_comment_count\" label=\"粉丝评论数\"></el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"obj\">\n          <!-- 这个obj是什么？？？？？ -->\n          <el-button type=\"text\">修改</el-button>\n          <el-button\n            type=\"text\"\n            @click=\"openOrclose(obj.row)\"\n          >{{obj.row.comment_status? '关闭评论' : '打开评论'}}</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-row type=\"flex\" style=\"height:100px\" justify='center' align=\"middle\">\n        <el-pagination\n         background layout=\"prev, pager, next\"\n          :total=\"page.totalArt\"\n           style=\"margin:50px\"\n           :page-size=\"page.pageSize\"\n           :current-page=\"page.curPage\"\n           @current-change=\"changeCur\"\n          >\n          </el-pagination>\n\n    </el-row>\n  </el-card>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      list: [],\n        page:{\n            totalArt:0,\n            curPage:1,\n            pageSize:10,\n        }\n    };\n  },\n  methods: {\n      changeCur(newPage){\n          this.page.curPage=newPage;\n          this.getComment();\n      },\n    getComment() {\n      this.$axios({\n        url: \"/articles\",\n        params: {\n          //    response_type=comment\n          response_type: \"comment\",page:this.page.curPage,per_page:this.page.pageSize\n        }\n      }).then(res => {\n        this.list = res.data.results;\n        // window.console.log(res);\n        \n        this.page.totalArt=res.data.total_count;\n        this.page.curPage=res.data.page;\n        this.page.pageSize=res.data.per_page;\n\n\n\n      });\n    },\n\n    tansStatus(row, column, cellValue) {\n      return cellValue ? \"正常\" : \"关闭\";\n    },\n    openOrclose(row) {\n      //    window.console.log(row)\n      let mes = row.comment_status ? \"关闭\" : \"打开\";\n      this.$confirm(`您是否确定要${mes}评论吗`).then(() => {\n        this.$axios({\n          url: \"/comments/status\",\n          method: \"put\",\n          params: {\n            article_id: row.id.toString()\n          },\n          data: {\n            allow_comment: !row.comment_status\n          }\n        }).then(() => {\n          this.$message({\n            type: \"success\",\n            message: \"操作成功\"\n          });\n          this.getComment();\n        });\n      });\n      //    let re=confirm(\"确定要修改评论状态吗？\")\n      //     if(re){\n\n      //     }\n    }\n  },\n  created() {\n    this.getComment();\n  }\n};\n</script>\n\n<style>\n\n\n</style>"]}]}