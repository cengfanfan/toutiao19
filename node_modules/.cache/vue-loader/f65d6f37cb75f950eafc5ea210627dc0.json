{"remainingRequest":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xingyanan/Desktop/1218toutiao/19toutiao/src/views/atricles/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/src/views/atricles/index.vue","mtime":1577585070960},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0YXRyaWNsZXN9IGZyb20gJy4uLy4uL2FjdGlvbnMvYXBpJwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJhZGlvOiA1LAogICAgICB0eXBlTGlzdDogW10sCiAgICAgIGF0cmljbGVzOiB7fSwKICAgICAgZGF0ZTogW10sCiAgICAgIGltZzogcmVxdWlyZSgiLi4vLi4vYXNzZXRzL2ltZy80MDQucG5nIiksCiAgICAgIHRvdGFsOiAwLAogICAgICBwYWdlOiB7CiAgICAgICAgdG90YWw6IDAsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIGN1clBhZ2U6IDEKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNoYW5nZUN1cihuZXdQYWdlKSB7CiAgICAgIAogICAgICBsZXQgcGFyYW1zID0gewogICAgICAgICAgLy/mlLnlj5jmkJzntKLmnaHku7bml7bmlLnlj5jnmoTlj4LmlbAKICAgICAgICBzdGF0dXM6IHRoaXMuYXRyaWNsZXMuc3RhdHVzID09PSA1ID8gbnVsbCA6IHRoaXMuYXRyaWNsZXMuc3RhdHVzLAogICAgICAgIGNoYW5uZWxfaWQ6IHRoaXMudHlwZUxpc3QuaWQsCiAgICAgICAgYmVnaW5fcHViZGF0ZTogdGhpcy5kYXRlPyB0aGlzLmRhdGVbMF06bnVsbCwKICAgICAgICBlbmRfcHViZGF0ZTogdGhpcy5kYXRlPjE/IHRoaXMuZGF0ZVsxXTpudWxsLAogICAgICAgIC8v5pS55Y+Y5YiG6aG15L+h5oGv5pe25pS55Y+Y55qE5Y+C5pWwCiAgICAgICAgcGFnZTpuZXdQYWdlLAogICAgICAgIHBlcl9wYWdlOnRoaXMucGFnZS5wYWdlU2l6ZQogICAgICB9OwoKICAgICAgdGhpcy5nZXRhdHJpY2xlcyhwYXJhbXMpCiAgICAgIAogICAgfSwKICAgIGFzeW5jIGdldFR5cGVMaXN0KCkgewogICAgICBsZXQgcmVzID1hd2FpdCB0aGlzLiRheGlvcyh7CiAgICAgICAgdXJsOiAiL2NoYW5uZWxzIgogICAgICB9KQogICAgICB0aGlzLnR5cGVMaXN0ID0gcmVzLmRhdGEuY2hhbm5lbHM7CiAgICAgICAgLy8gICB0aGlzLnR5cGVMaXN0Lm5hbWU9cmVzLmNoYW5uZWxzLm5hbWUKICAgICAgICB3aW5kb3cuY29uc29sZS5sb2cocmVzLmRhdGEuY2hhbm5lbHMpOwogICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyh0aGlzLnR5cGVMaXN0LmlkKQogICAgfSwKCiAgICBjaGFuZ2VTdGF0dXMoKSB7CiAgICAgICAgdGhpcy5wYWdlLmN1clBhZ2U9MQogICAgICBsZXQgcGFyYW1zID0gewogICAgICAgICAgLy/mlLnlj5jmkJzntKLmnaHku7bml7bmlLnlj5jnmoTlj4LmlbAKICAgICAgICBzdGF0dXM6IHRoaXMuYXRyaWNsZXMuc3RhdHVzID09PSA1ID8gbnVsbCA6IHRoaXMuYXRyaWNsZXMuc3RhdHVzLAogICAgICAgIGNoYW5uZWxfaWQ6IHRoaXMudHlwZUxpc3QuaWQsCiAgICAgICAgYmVnaW5fcHViZGF0ZTogdGhpcy5kYXRlPyB0aGlzLmRhdGVbMF06bnVsbCwKICAgICAgICBlbmRfcHViZGF0ZTogdGhpcy5kYXRlLmxlbmd0aD4xPyB0aGlzLmRhdGVbMV06bnVsbCwKICAgICAgICAvL+aUueWPmOWIhumhteS/oeaBr+aXtuaUueWPmOeahOWPguaVsAogICAgICAgIHBhZ2U6dGhpcy5wYWdlLmN1clBhZ2UsCiAgICAgICAgcGVyX3BhZ2U6dGhpcy5wYWdlLnBhZ2VTaXplCiAgICAKICAgICAgfTsKICAgICAgd2luZG93LmNvbnNvbGUubG9nKHRoaXMuZGF0ZSkKCiAgICAgIHRoaXMuZ2V0YXRyaWNsZXMocGFyYW1zKTsgLy8g6LCD55So6I635Y+W5paH56ug5pWw5o2uCiAgICB9LAogICAgYXN5bmMgZ2V0YXRyaWNsZXMocGFyYW1zKSB7CiAgICAgbGV0IHJlcz1hd2FpdCBnZXRhdHJpY2xlcyhwYXJhbXMpOwogICAgICB3aW5kb3cuY29uc29sZS5sb2cocmVzLmRhdGEucmVzdWx0cyk7CiAgICAgICAgdGhpcy5hdHJpY2xlcyA9IHJlcy5kYXRhLnJlc3VsdHM7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsX2NvdW50OwogICAgICAgIHRoaXMucGFnZS50b3RhbCA9IHJlcy5kYXRhLnRvdGFsX2NvdW50OwogICAgICAgIHRoaXMucGFnZS5wYWdlU2l6ZSA9IHJlcy5kYXRhLnBlcl9wYWdlOwogICAgICAgIC8vIHRoaXMucGFnZS5jdXJQYWdlID0gcmVzLmRhdGEucGFnZTsKICAgIH0sCiAgICBhc3luYyBkZWxBcnQoaWQpewogICAgICAgIAogICAgICAgIGF3YWl0IHRoaXMuJGNvbmZpcm0oJ+aCqOehruWumuimgeWIoOmZpOWQl++8nycpCiAgICAgICAgbGV0IHJlcz0gYXdhaXQgdGhpcy4kYXhpb3MoewogICAgICAgICAgICAgICAgdXJsOmAvYXJ0aWNsZXMvJHtpZC50b1N0cmluZygpfWAsCiAgICAgICAgICAgICAgICBtZXRob2Q6J2RlbGV0ZScsCgogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLmdldGF0cmljbGVzKCk7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHJlcy5tZXNzYWdlKQogICAgfSwKICAgIHVwZGF0YShpZCl7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvaG9tZS9wdWJBdHJpY2xlcy8ke2lkLnRvU3RyaW5nKCl9YCkKCiAgICB9CiAgfSwKICBmaWx0ZXJzOiB7CiAgICB0cmFuc1N0YXR1cyh2YWx1ZSkgewogICAgICBzd2l0Y2ggKHZhbHVlKSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgcmV0dXJuICLojYnnqL8iOwogICAgICAgIGNhc2UgMToKICAgICAgICAgIHJldHVybiAi5b6F5a6h5qC4IjsKICAgICAgICBjYXNlIDI6CiAgICAgICAgICByZXR1cm4gIuW3suWPkeihqCI7CiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmV0dXJuICLlrqHmoLjlpLHotKUiOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0VHlwZUxpc3QoKTsKICAgIHRoaXMuZ2V0YXRyaWNsZXMoKTsKICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/atricles","sourcesContent":["<template>\n  <div>\n    <el-card>\n      <bread-crumb slot=\"header\">\n        <template slot=\"title\">内容列表</template>\n      </bread-crumb>\n\n      <el-row>全部图文</el-row>\n      <el-divider></el-divider>\n      <el-row class=\"formList\">\n        <el-col :span=\"2\">\n          <span>文章状态</span>\n        </el-col>\n        <el-col :span=\"18\">\n          <!-- 文章状态，0-草稿，1-待审核，2-审核通过，3-审核失败，4-已删除，不传为全部 -->\n          <el-radio-group v-model=\"atricles.status\" @change=\"changeStatus\">\n            <el-radio :label=\"5\">全部</el-radio>\n            <el-radio :label=\"0\">草稿</el-radio>\n            <el-radio :label=\"1\">待审核</el-radio>\n            <el-radio :label=\"2\">审核通过</el-radio>\n            <el-radio :label=\"3\">审核失败</el-radio>\n          </el-radio-group>\n        </el-col>\n      </el-row>\n      <el-row class=\"formList\">\n        <el-col :span=\"2\">\n          <span>频道列表</span>\n        </el-col>\n        <el-col :span=\"18\">\n          <el-select v-model=\"typeList.id\" @change=\"changeStatus\">\n            <el-option v-for=\"itm in typeList\" :key=\"itm.id\" :label=\"itm.name\" :value=\"itm.id\"></el-option>\n          </el-select>\n        </el-col>\n      </el-row>\n      <el-row class=\"formList\">\n        <el-col :span=\"2\">\n          <span>选择时间</span>\n        </el-col>\n        <el-col :span=\"18\">\n          <div>\n            <el-date-picker\n            value-format=\"yyyy-MM-dd\"\n              @change=\"changeStatus\"\n              v-model=\"date\"\n              type=\"daterange\"\n              range-separator=\"-\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n            ></el-date-picker>\n            {{date}}\n          </div>\n        </el-col>\n      </el-row>\n    </el-card>\n    <el-card>\n      <p>共找到{{total}}条符合条件的内容</p>\n      <el-divider></el-divider>\n      <el-row v-for=\"(itm,index) in atricles\" :key=\"index\" class=\"main_body\">\n        <el-col class=\"user_img\">\n          <img :src=\"itm.cover.type? itm.cover.images[0] : img\" alt />\n        </el-col>\n        <el-col class=\"user_cont\">\n          <span>{{itm.title}}</span>\n          <el-tag style=\"width:60px\">{{itm.status|transStatus}}</el-tag>\n          <span>{{itm.pubdate}}</span>\n        </el-col>\n        <el-col class=\"button\">\n          <el-button type=\"text\" @click=\"updata(itm.id)\">\n            <i class=\"el-icon-edit\"></i>\n            <span>修改</span>\n          </el-button>\n          <el-button type=\"text\" @click=\"delArt(itm.id)\">\n            <i class=\"el-icon-delete\"></i>\n            <span>删除</span>\n          </el-button>\n        </el-col>\n        <el-col></el-col>\n      </el-row>\n\n      <el-row type=\"flex\" justify=\"center\" style=\"margin-top:20px\">\n        <el-pagination\n          background\n          layout=\"prev, pager, next\"\n          :total=\"page.total\"\n          :current-page=\"page.curPage\"\n          :page-size=\"page.pageSize\"\n          @current-change=\"changeCur\"\n        ></el-pagination>\n      </el-row>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport {getatricles} from '../../actions/api'\nexport default {\n  data() {\n    return {\n      radio: 5,\n      typeList: [],\n      atricles: {},\n      date: [],\n      img: require(\"../../assets/img/404.png\"),\n      total: 0,\n      page: {\n        total: 0,\n        pageSize: 10,\n        curPage: 1\n      }\n    };\n  },\n  methods: {\n    changeCur(newPage) {\n      \n      let params = {\n          //改变搜索条件时改变的参数\n        status: this.atricles.status === 5 ? null : this.atricles.status,\n        channel_id: this.typeList.id,\n        begin_pubdate: this.date? this.date[0]:null,\n        end_pubdate: this.date>1? this.date[1]:null,\n        //改变分页信息时改变的参数\n        page:newPage,\n        per_page:this.page.pageSize\n      };\n\n      this.getatricles(params)\n      \n    },\n    async getTypeList() {\n      let res =await this.$axios({\n        url: \"/channels\"\n      })\n      this.typeList = res.data.channels;\n        //   this.typeList.name=res.channels.name\n        window.console.log(res.data.channels);\n        // window.console.log(this.typeList.id)\n    },\n\n    changeStatus() {\n        this.page.curPage=1\n      let params = {\n          //改变搜索条件时改变的参数\n        status: this.atricles.status === 5 ? null : this.atricles.status,\n        channel_id: this.typeList.id,\n        begin_pubdate: this.date? this.date[0]:null,\n        end_pubdate: this.date.length>1? this.date[1]:null,\n        //改变分页信息时改变的参数\n        page:this.page.curPage,\n        per_page:this.page.pageSize\n    \n      };\n      window.console.log(this.date)\n\n      this.getatricles(params); // 调用获取文章数据\n    },\n    async getatricles(params) {\n     let res=await getatricles(params);\n      window.console.log(res.data.results);\n        this.atricles = res.data.results;\n        this.total = res.data.total_count;\n        this.page.total = res.data.total_count;\n        this.page.pageSize = res.data.per_page;\n        // this.page.curPage = res.data.page;\n    },\n    async delArt(id){\n        \n        await this.$confirm('您确定要删除吗？')\n        let res= await this.$axios({\n                url:`/articles/${id.toString()}`,\n                method:'delete',\n\n            })\n            this.getatricles();\n                this.$message(res.message)\n    },\n    updata(id){\n      this.$router.push(`/home/pubAtricles/${id.toString()}`)\n\n    }\n  },\n  filters: {\n    transStatus(value) {\n      switch (value) {\n        case 0:\n          return \"草稿\";\n        case 1:\n          return \"待审核\";\n        case 2:\n          return \"已发表\";\n        case 3:\n          return \"审核失败\";\n        default:\n          break;\n      }\n    }\n  },\n  created() {\n    this.getTypeList();\n    this.getatricles();\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.user_img {\n  float: left;\n  width: 180px;\n  img {\n    width: 170px;\n    height: 100px;\n  }\n}\n.user_cont {\n  width: 70%;\n  display: flex;\n  flex-direction: column;\n  float: left;\n}\n.button {\n  width: 100px;\n  float: right;\n}\n.main_body {\n  margin-top: 10px;\n  height: 120px;\n  border-bottom: 1px solid #eaeef1;\n}\n.formList {\n  margin: 20px 0;\n}\n</style>"]}]}