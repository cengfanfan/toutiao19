{"remainingRequest":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xingyanan/Desktop/1218toutiao/19toutiao/src/views/atricles/index.vue?vue&type=style&index=0&id=62a8335e&lang=less&scoped=true&","dependencies":[{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/src/views/atricles/index.vue","mtime":1577585735167},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xingyanan/Desktop/1218toutiao/19toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi51c2VyX2ltZyB7CiAgZmxvYXQ6IGxlZnQ7CiAgd2lkdGg6IDE4MHB4OwogIGltZyB7CiAgICB3aWR0aDogMTcwcHg7CiAgICBoZWlnaHQ6IDEwMHB4OwogIH0KfQoudXNlcl9jb250IHsKICB3aWR0aDogNzAlOwogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBmbG9hdDogbGVmdDsKfQouYnV0dG9uIHsKICB3aWR0aDogMTAwcHg7CiAgZmxvYXQ6IHJpZ2h0Owp9Ci5tYWluX2JvZHkgewogIG1hcmdpbi10b3A6IDEwcHg7CiAgaGVpZ2h0OiAxMjBweDsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VhZWVmMTsKfQouZm9ybUxpc3QgewogIG1hcmdpbjogMjBweCAwOwp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/atricles","sourcesContent":["<template>\n  <div>\n    <el-card>\n      <bread-crumb slot=\"header\">\n        <template slot=\"title\">内容列表</template>\n      </bread-crumb>\n\n      <el-row>全部图文</el-row>\n      <el-divider></el-divider>\n      <el-row class=\"formList\">\n        <el-col :span=\"2\">\n          <span>文章状态</span>\n        </el-col>\n        <el-col :span=\"18\">\n          <!-- 文章状态，0-草稿，1-待审核，2-审核通过，3-审核失败，4-已删除，不传为全部 -->\n          <el-radio-group v-model=\"atricles.status\" @change=\"changeStatus\">\n            <el-radio :label=\"5\">全部</el-radio>\n            <el-radio :label=\"0\">草稿</el-radio>\n            <el-radio :label=\"1\">待审核</el-radio>\n            <el-radio :label=\"2\">审核通过</el-radio>\n            <el-radio :label=\"3\">审核失败</el-radio>\n          </el-radio-group>\n        </el-col>\n      </el-row>\n      <el-row class=\"formList\">\n        <el-col :span=\"2\">\n          <span>频道列表</span>\n        </el-col>\n        <el-col :span=\"18\">\n          <el-select v-model=\"typeList.id\" @change=\"changeStatus\">\n            <el-option v-for=\"itm in typeList\" :key=\"itm.id\" :label=\"itm.name\" :value=\"itm.id\"></el-option>\n          </el-select>\n        </el-col>\n      </el-row>\n      <el-row class=\"formList\">\n        <el-col :span=\"2\">\n          <span>选择时间</span>\n        </el-col>\n        <el-col :span=\"18\">\n          <div>\n            <el-date-picker\n            value-format=\"yyyy-MM-dd\"\n              @change=\"changeStatus\"\n              v-model=\"date\"\n              type=\"daterange\"\n              range-separator=\"-\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n            ></el-date-picker>\n            {{date}}\n          </div>\n        </el-col>\n      </el-row>\n    </el-card>\n    <el-card>\n      <p>共找到{{total}}条符合条件的内容</p>\n      <el-divider></el-divider>\n      <el-row v-for=\"(itm,index) in atricles\" :key=\"index\" class=\"main_body\">\n        <el-col class=\"user_img\">\n          <img :src=\"itm.cover.type? itm.cover.images[0] : img\" alt />\n        </el-col>\n        <el-col class=\"user_cont\">\n          <span>{{itm.title}}</span>\n          <el-tag style=\"width:60px\">{{itm.status|transStatus}}</el-tag>\n          <span>{{itm.pubdate}}</span>\n        </el-col>\n        <el-col class=\"button\">\n          <el-button type=\"text\" @click=\"updata(itm.id)\">\n            <i class=\"el-icon-edit\"></i>\n            <span>修改</span>\n          </el-button>\n          <el-button type=\"text\" @click=\"delArt(itm.id)\">\n            <i class=\"el-icon-delete\"></i>\n            <span>删除</span>\n          </el-button>\n        </el-col>\n        <el-col></el-col>\n      </el-row>\n\n      <el-row type=\"flex\" justify=\"center\" style=\"margin-top:20px\">\n        <el-pagination\n          background\n          layout=\"prev, pager, next\"\n          :total=\"page.total\"\n          :current-page=\"page.curPage\"\n          :page-size=\"page.pageSize\"\n          @current-change=\"changeCur\"\n        ></el-pagination>\n      </el-row>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport {getatricles,getTypeList} from '../../actions/api'\nexport default {\n  data() {\n    return {\n      radio: 5,\n      typeList: [],\n      atricles: {},\n      date: [],\n      img: require(\"../../assets/img/404.png\"),\n      total: 0,\n      page: {\n        total: 0,\n        pageSize: 10,\n        curPage: 1\n      }\n    };\n  },\n  methods: {\n    changeCur(newPage) {\n      \n      let params = {\n          //改变搜索条件时改变的参数\n        status: this.atricles.status === 5 ? null : this.atricles.status,\n        channel_id: this.typeList.id,\n        begin_pubdate: this.date? this.date[0]:null,\n        end_pubdate: this.date>1? this.date[1]:null,\n        //改变分页信息时改变的参数\n        page:newPage,\n        per_page:this.page.pageSize\n      };\n\n      this.getatricles(params)\n      \n    },\n    async getTypeList() {\n      let res =await getTypeList();\n      this.typeList = res.data.channels;\n        //   this.typeList.name=res.channels.name\n        window.console.log(res.data.channels);\n        // window.console.log(this.typeList.id)\n    },\n\n    changeStatus() {\n        this.page.curPage=1\n      let params = {\n          //改变搜索条件时改变的参数\n        status: this.atricles.status === 5 ? null : this.atricles.status,\n        channel_id: this.typeList.id,\n        begin_pubdate: this.date? this.date[0]:null,\n        end_pubdate: this.date.length>1? this.date[1]:null,\n        //改变分页信息时改变的参数\n        page:this.page.curPage,\n        per_page:this.page.pageSize\n    \n      };\n      window.console.log(this.date)\n\n      this.getatricles(params); // 调用获取文章数据\n    },\n    async getatricles(params) {\n     let res=await getatricles(params);\n      window.console.log(res.data.results);\n        this.atricles = res.data.results;\n        this.total = res.data.total_count;\n        this.page.total = res.data.total_count;\n        this.page.pageSize = res.data.per_page;\n        // this.page.curPage = res.data.page;\n    },\n    async delArt(id){\n        \n        await this.$confirm('您确定要删除吗？')\n        let res= await this.$axios({\n                url:`/articles/${id.toString()}`,\n                method:'delete',\n\n            })\n            this.getatricles();\n            this.$message(res.message)\n    },\n    updata(id){\n      this.$router.push(`/home/pubAtricles/${id.toString()}`)\n\n    }\n  },\n  filters: {\n    transStatus(value) {\n      switch (value) {\n        case 0:\n          return \"草稿\";\n        case 1:\n          return \"待审核\";\n        case 2:\n          return \"已发表\";\n        case 3:\n          return \"审核失败\";\n        default:\n          break;\n      }\n    }\n  },\n  created() {\n    this.getTypeList();\n    this.getatricles();\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.user_img {\n  float: left;\n  width: 180px;\n  img {\n    width: 170px;\n    height: 100px;\n  }\n}\n.user_cont {\n  width: 70%;\n  display: flex;\n  flex-direction: column;\n  float: left;\n}\n.button {\n  width: 100px;\n  float: right;\n}\n.main_body {\n  margin-top: 10px;\n  height: 120px;\n  border-bottom: 1px solid #eaeef1;\n}\n.formList {\n  margin: 20px 0;\n}\n</style>"]}]}